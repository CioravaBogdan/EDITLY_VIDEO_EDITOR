# üé¨ Editly Video Editor API

**Dockerized Editly video editor with HTTP API for seamless n8n integration**

[![Docker](https://img.shields.io/badge/Docker-Ready-blue?logo=docker)](https://docker.com)
[![n8n](https://img.shields.io/badge/n8n-Compatible-red?logo=n8n)](https://n8n.io)
[![Express](https://img.shields.io/badge/Express-API-green?logo=express)](https://expressjs.com)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

This project extends the powerful [Editly](https://github.com/mifi/editly) video editing library with a complete HTTP API server, making it perfect for automation workflows with n8n, webhooks, and other integrations.

## üöÄ Features

- **Complete HTTP API** with Express.js
- **Docker containerized** for easy deployment
- **n8n integration ready** with CORS support
- **File upload/download** endpoints
- **Health monitoring** and logging
- **Production ready** with proper error handling
- **Volume persistence** for input/output files

## üìã API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/health` | Health check |
| `GET` | `/info` | API documentation |
| `POST` | `/upload` | Upload files (multipart) |
| `POST` | `/edit` | Create video with editSpec |
| `GET` | `/download/:filename` | Download generated video |
| `GET` | `/files` | List all generated files |

## üê≥ Quick Start with Docker

### 1. Clone and Run
```bash
git clone https://github.com/CioravaBogdan/EDITLY_VIDEO_EDITOR.git
cd EDITLY_VIDEO_EDITOR
docker-compose up --build -d
```

### 2. Verify Installation
```bash
# Health check
curl http://localhost:3001/health

# API info
curl http://localhost:3001/info
```

### 3. Create Your First Video
```bash
curl -X POST http://localhost:3001/edit \
  -H "Content-Type: application/json" \
  -d '{
    "editSpec": {
      "width": 1280,
      "height": 720,
      "fps": 30,
      "fast": true,
      "clips": [
        {
          "duration": 5,
          "layers": [
            {
              "type": "title",
              "text": "Hello World!",
              "textColor": "#ffffff",
              "position": "center"
            },
            {
              "type": "fill-color",
              "color": "#4CAF50"
            }
          ]
        }
      ]
    },
    "outputFilename": "hello-world.mp4"
  }'
```

## üîß Configuration

### Docker Compose Services

- **editly-api**: Main API server on port 3001
- **volumes**: Persistent storage for uploads and outputs

### Environment Variables

- `PORT`: API server port (default: 3001)
- `NODE_ENV`: Environment mode (production/development)

### Volume Mounts

- `uploads:/app/uploads` - Input files storage
- `outputs:/outputs` - Generated videos storage
- `./examples/assets:/app/examples/assets` - Example assets

## üìñ Documentation

- [**API Documentation**](README-API.md) - Complete API reference (Romanian)
- [**n8n Integration Examples**](n8n-examples.md) - Ready-to-use n8n workflows
- [**Original Editly Docs**](README-ORIGINAL.md) - Complete editSpec reference

## üß™ Testing

Run the included test script:
```bash
# Linux/macOS
./test-api.sh

# Windows (PowerShell)
$body = Get-Content test-api.json -Raw
Invoke-RestMethod -Uri http://localhost:3001/edit -Method Post -Body $body -ContentType "application/json"
```

## üîó n8n Integration

### Simple Video Creation Workflow

1. **HTTP Request Node**: POST to `/edit` with editSpec
2. **HTTP Request Node**: GET to `/download/{filename}`

Example editSpec for n8n:
```json
{
  "editSpec": {
    "width": 1920,
    "height": 1080,
    "fps": 25,
    "clips": [
      {
        "duration": 4,
        "layers": [
          {
            "type": "title",
            "text": "Generated by n8n",
            "position": "center"
          }
        ]
      }
    ]
  },
  "outputFilename": "n8n-video.mp4"
}
```

## üé® Video Creation Examples

### Text Animation
```json
{
  "editSpec": {
    "clips": [
      {
        "duration": 3,
        "layers": [
          {
            "type": "slide-in-text",
            "text": "Welcome!",
            "fontSize": 60,
            "position": "center"
          }
        ]
      }
    ]
  }
}
```

### Image Slideshow
```json
{
  "editSpec": {
    "clips": [
      {
        "duration": 3,
        "layers": [
          {
            "type": "image",
            "path": "/app/uploads/image1.jpg"
          }
        ]
      }
    ],
    "defaults": {
      "transition": {
        "duration": 1,
        "name": "fade"
      }
    }
  }
}
```

## üõ†Ô∏è Development

### Local Development
```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build TypeScript
npm run build

# Run tests
npm test
```

### API Server Development
The API server code is in `src/api-server.ts` and includes:
- Express.js server with CORS
- Multer for file uploads
- Error handling and logging
- Health checks and monitoring

## üì¶ Production Deployment

### Using Docker Compose (Recommended)
```bash
docker-compose up -d
```

### Using Docker Build
```bash
docker build -t editly-api .
docker run -p 3001:3001 -v editly_outputs:/outputs -v editly_uploads:/app/uploads editly-api
```

### Environment Configuration
```yaml
environment:
  - NODE_ENV=production
  - PORT=3001
```

## üîí Security Considerations

- Enable authentication for production use
- Configure proper CORS origins
- Implement rate limiting
- Set up file size limits
- Monitor disk usage for uploads/outputs

## üêõ Troubleshooting

### Check Container Logs
```bash
docker-compose logs -f editly
```

### Common Issues
- **Port 3001 in use**: Change port in docker-compose.yml
- **Out of disk space**: Clean up old videos in `/outputs`
- **Upload fails**: Check file size limits (current: 500MB)

### Debug Mode
```bash
docker-compose up
# (without -d flag to see logs)
```

## ü§ù Contributing

1. Fork this repository
2. Create your feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- [Editly](https://github.com/mifi/editly) - The amazing video editing library this API wraps
- [n8n](https://n8n.io) - The workflow automation platform this integrates with
- [Express.js](https://expressjs.com) - Web framework for the API server

## üìû Support

- **Issues**: [GitHub Issues](https://github.com/CioravaBogdan/EDITLY_VIDEO_EDITOR/issues)
- **Discussions**: [GitHub Discussions](https://github.com/CioravaBogdan/EDITLY_VIDEO_EDITOR/discussions)
- **Original Editly**: [Editly Documentation](README-ORIGINAL.md)

---

**Made with ‚ù§Ô∏è for automation and video creation workflows**
